{"version":3,"sources":["webpack://tauri/webpack/universalModuleDefinition","webpack://tauri/./src/api/dependency-manager/npm-packages.ts","webpack://tauri/./src/api/dependency-manager/types.ts","webpack://tauri/./src/api/dependency-manager/util.ts","webpack://tauri/./src/api/recipes/install.ts","webpack://tauri/./src/helpers/app-paths.ts","webpack://tauri/./src/helpers/logger.ts","webpack://tauri/./src/helpers/spawn.ts","webpack://tauri/external \"chalk\"","webpack://tauri/external \"cross-spawn\"","webpack://tauri/external \"fs\"","webpack://tauri/external \"https\"","webpack://tauri/external \"inquirer\"","webpack://tauri/external \"ms\"","webpack://tauri/external \"path\"","webpack://tauri/external \"semver\"","webpack://tauri/webpack/bootstrap","webpack://tauri/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVa;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,cAAc,GAAG,uBAAuB,GAAG,oBAAoB,GAAG,eAAe;AACjF,cAAc,mBAAO,CAAC,sDAAS;AAC/B,aAAa,mBAAO,CAAC,oDAAQ;AAC7B,+BAA+B,mBAAO,CAAC,qDAAsB;AAC7D,kBAAkB,mBAAO,CAAC,2DAAyB;AACnD,iCAAiC,mBAAO,CAAC,0BAAU;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,oBAAoB,mBAAO,CAAC,gCAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,cAAc;;;;;;;;;;;AClLD;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C,sBAAsB,KAAK;;;;;;;;;;;ACR7D;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,gBAAgB,GAAG,kBAAkB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,yBAAyB,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,6BAA6B;AACxN,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C,cAAc,mBAAO,CAAC,mDAAqB;AAC3C,oBAAoB,mBAAO,CAAC,gCAAa;AACzC,kBAAkB,mBAAO,CAAC,2DAAyB;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,+BAA+B,mBAAO,CAAC,sBAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,4BAA4B;AAC5B;AACA;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","file":"api/recipes/install.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tauri\"] = factory();\n\telse\n\t\troot[\"tauri\"] = factory();\n})(global, function() {\nreturn ","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.update = exports.installTheseDev = exports.installThese = exports.install = void 0;\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar inquirer_1 = __importDefault(require(\"inquirer\"));\nvar fs_1 = require(\"fs\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar log = logger_1.default('dependency:npm-packages');\nfunction manageDependencies(managementType, dependencies) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function () {\n        var installedDeps, updatedDeps, npmChild, yarnChild, _i, dependencies_1, dependency, currentVersion, latestVersion, inquired, result;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    installedDeps = [];\n                    updatedDeps = [];\n                    npmChild = cross_spawn_1.sync('npm', ['--version']);\n                    yarnChild = cross_spawn_1.sync('yarn', ['--version']);\n                    if (((_a = npmChild.status) !== null && _a !== void 0 ? _a : npmChild.error) &&\n                        ((_b = yarnChild.status) !== null && _b !== void 0 ? _b : yarnChild.error)) {\n                        throw new Error('must have `npm` or `yarn` installed to manage dependenices');\n                    }\n                    if (!fs_1.existsSync(app_paths_1.resolve.app('package.json'))) return [3 /*break*/, 14];\n                    _i = 0, dependencies_1 = dependencies;\n                    _c.label = 1;\n                case 1:\n                    if (!(_i < dependencies_1.length)) return [3 /*break*/, 14];\n                    dependency = dependencies_1[_i];\n                    return [4 /*yield*/, util_1.getNpmPackageVersion(dependency)];\n                case 2:\n                    currentVersion = _c.sent();\n                    if (!(currentVersion === null)) return [3 /*break*/, 7];\n                    log(\"Installing \" + dependency + \"...\");\n                    if (!(managementType === types_1.ManagementType.Install)) return [3 /*break*/, 4];\n                    return [4 /*yield*/, util_1.installNpmPackage(dependency)];\n                case 3:\n                    _c.sent();\n                    return [3 /*break*/, 6];\n                case 4:\n                    if (!(managementType === types_1.ManagementType.InstallDev)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, util_1.installNpmDevPackage(dependency)];\n                case 5:\n                    _c.sent();\n                    _c.label = 6;\n                case 6:\n                    installedDeps.push(dependency);\n                    return [3 /*break*/, 13];\n                case 7:\n                    if (!(managementType === types_1.ManagementType.Update)) return [3 /*break*/, 12];\n                    return [4 /*yield*/, util_1.getNpmLatestVersion(dependency)];\n                case 8:\n                    latestVersion = _c.sent();\n                    if (!util_1.semverLt(currentVersion, latestVersion)) return [3 /*break*/, 10];\n                    return [4 /*yield*/, inquirer_1.default.prompt([\n                            {\n                                type: 'confirm',\n                                name: 'answer',\n                                message: \"[NPM]: \\\"\" + dependency + \"\\\" latest version is \" + latestVersion + \". Do you want to update?\",\n                                default: false\n                            }\n                        ])\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-member-access\n                    ];\n                case 9:\n                    inquired = _c.sent();\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-member-access\n                    if (inquired.answer) {\n                        log(\"Updating \" + dependency + \"...\");\n                        util_1.updateNpmPackage(dependency);\n                        updatedDeps.push(dependency);\n                    }\n                    return [3 /*break*/, 11];\n                case 10:\n                    log(\"\\\"\" + dependency + \"\\\" is up to date\");\n                    _c.label = 11;\n                case 11: return [3 /*break*/, 13];\n                case 12:\n                    log(\"\\\"\" + dependency + \"\\\" is already installed\");\n                    _c.label = 13;\n                case 13:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 14:\n                    result = new Map();\n                    result.set(types_1.ManagementType.Install, installedDeps);\n                    result.set(types_1.ManagementType.Update, updatedDeps);\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nvar dependencies = ['tauri'];\nfunction install() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.install = install;\nfunction installThese(dependencies) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.installThese = installThese;\nfunction installTheseDev(dependencies) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.InstallDev, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.installTheseDev = installTheseDev;\nfunction update() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.update = update;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManagementType = void 0;\nvar ManagementType;\n(function (ManagementType) {\n    ManagementType[ManagementType[\"Install\"] = 0] = \"Install\";\n    ManagementType[ManagementType[\"InstallDev\"] = 1] = \"InstallDev\";\n    ManagementType[ManagementType[\"Update\"] = 2] = \"Update\";\n})(ManagementType = exports.ManagementType || (exports.ManagementType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.semverLt = exports.padVersion = exports.updateNpmPackage = exports.installNpmDevPackage = exports.installNpmPackage = exports.getNpmPackageVersion = exports.getNpmLatestVersion = exports.getCrateLatestVersion = void 0;\nvar https_1 = __importDefault(require(\"https\"));\nvar spawn_1 = require(\"../../helpers/spawn\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar fs_1 = require(\"fs\");\nvar semver_1 = __importDefault(require(\"semver\"));\nvar BASE_URL = 'https://docs.rs/crate/';\nfunction useYarn() {\n    return __awaiter(this, void 0, void 0, function () {\n        var hasYarnLockfile;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    hasYarnLockfile = fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'));\n                    if (!hasYarnLockfile) return [3 /*break*/, 1];\n                    return [2 /*return*/, true];\n                case 1: return [4 /*yield*/, new Promise(function (resolve) {\n                        var _a;\n                        var child = cross_spawn_1.sync('npm', ['--version']);\n                        resolve(!!((_a = child.status) !== null && _a !== void 0 ? _a : child.error));\n                    })];\n                case 2: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction getCrateLatestVersion(crateName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n                        var url = \"\" + BASE_URL + crateName;\n                        https_1.default.get(url, function (res) {\n                            if (res.statusCode !== 302 || !res.headers.location) {\n                                reject(res);\n                            }\n                            else {\n                                var version = res.headers.location.replace(url + '/', '');\n                                resolve(version);\n                            }\n                        });\n                    })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.getCrateLatestVersion = getCrateLatestVersion;\nfunction getNpmLatestVersion(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var child, output, packageJson, child;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        child = cross_spawn_1.sync('yarn', ['info', packageName, 'versions', '--json'], {\n                            cwd: app_paths_1.appDir\n                        });\n                        output = String(child.output[1]);\n                        packageJson = JSON.parse(output);\n                        return [2 /*return*/, packageJson.data[packageJson.data.length - 1]];\n                    }\n                    else {\n                        child = cross_spawn_1.sync('npm', ['show', packageName, 'version'], {\n                            cwd: app_paths_1.appDir\n                        });\n                        return [2 /*return*/, String(child.output[1]).replace('\\n', '')];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.getNpmLatestVersion = getNpmLatestVersion;\nfunction getNpmPackageVersion(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var child, output, matches;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    child = (_a.sent())\n                        ? cross_spawn_1.sync('yarn', ['list', '--patern', packageName, '--depth', '0'], {\n                            cwd: app_paths_1.appDir\n                        })\n                        : cross_spawn_1.sync('npm', ['list', packageName, 'version', '--depth', '0'], {\n                            cwd: app_paths_1.appDir\n                        });\n                    output = String(child.output[1]);\n                    matches = new RegExp(packageName + '@(\\\\S+)', 'g').exec(output);\n                    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n                        return [2 /*return*/, matches[1]];\n                    }\n                    else {\n                        return [2 /*return*/, null];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.getNpmPackageVersion = getNpmPackageVersion;\nfunction installNpmPackage(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        spawn_1.spawnSync('yarn', ['add', packageName], app_paths_1.appDir);\n                    }\n                    else {\n                        spawn_1.spawnSync('npm', ['install', packageName], app_paths_1.appDir);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.installNpmPackage = installNpmPackage;\nfunction installNpmDevPackage(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        spawn_1.spawnSync('yarn', ['add', packageName, '--dev'], app_paths_1.appDir);\n                    }\n                    else {\n                        spawn_1.spawnSync('npm', ['install', packageName, '--save-dev'], app_paths_1.appDir);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.installNpmDevPackage = installNpmDevPackage;\nfunction updateNpmPackage(packageName) {\n    var usesYarn = fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'));\n    if (usesYarn) {\n        spawn_1.spawnSync('yarn', ['upgrade', packageName, '--latest'], app_paths_1.appDir);\n    }\n    else {\n        spawn_1.spawnSync('npm', ['install', packageName + \"@latest\"], app_paths_1.appDir);\n    }\n}\nexports.updateNpmPackage = updateNpmPackage;\nfunction padVersion(version) {\n    var _a;\n    var count = ((_a = version.match(/\\./g)) !== null && _a !== void 0 ? _a : []).length;\n    while (count < 2) {\n        count++;\n        version += '.0';\n    }\n    return version;\n}\nexports.padVersion = padVersion;\nfunction semverLt(first, second) {\n    return semver_1.default.lt(padVersion(first), padVersion(second));\n}\nexports.semverLt = semverLt;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.runRecipePostConfig = exports.installRecipeDependencies = void 0;\nvar npm_packages_1 = require(\"../dependency-manager/npm-packages\");\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nfunction installRecipeDependencies(recipe) {\n    return __awaiter(this, void 0, void 0, function () {\n        var log;\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    log = logger_1.default('recipe:install');\n                    log(\"Installing dependencies for \" + recipe.descriptiveName);\n                    return [4 /*yield*/, npm_packages_1.installThese(recipe.extraNpmDependencies).then(function (results) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, npm_packages_1.installTheseDev(recipe.extraNpmDevDependencies).then(function (results2) {\n                                            return new Map(__spreadArrays(Array.from(results.entries()), Array.from(results2.entries())));\n                                        })];\n                                    case 1: return [2 /*return*/, _a.sent()];\n                                }\n                            });\n                        }); })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.installRecipeDependencies = installRecipeDependencies;\nfunction runRecipePostConfig(recipe, cwd) {\n    return __awaiter(this, void 0, void 0, function () {\n        var log;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    log = logger_1.default('recipe:postconfig');\n                    log(\"Running post configuration for \" + recipe.descriptiveName);\n                    return [4 /*yield*/, new Promise(function () { return recipe.postConfiguration(cwd); })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.runRecipePostConfig = runRecipePostConfig;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = exports.tauriDir = exports.appDir = void 0;\nvar fs_1 = require(\"fs\");\nvar path_1 = require(\"path\");\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar warn = logger_1.default('tauri', chalk_1.default.red);\nfunction resolvePath(basePath, dir) {\n    return dir && path_1.isAbsolute(dir) ? dir : path_1.resolve(basePath, dir);\n}\nvar getAppDir = function () {\n    var dir = process.cwd();\n    var count = 0;\n    // only go up three folders max\n    while (dir.length > 0 && !dir.endsWith(path_1.sep) && count <= 2) {\n        if (fs_1.existsSync(path_1.join(dir, 'src-tauri', 'tauri.conf.json'))) {\n            return dir;\n        }\n        count++;\n        dir = path_1.normalize(path_1.join(dir, '..'));\n    }\n    warn(\"Couldn't find recognize the current folder as a part of a Tauri project\");\n    process.exit(1);\n};\nvar appDir = getAppDir();\nexports.appDir = appDir;\nvar tauriDir = path_1.resolve(appDir, 'src-tauri');\nexports.tauriDir = tauriDir;\nvar resolveDir = {\n    app: function (dir) { return resolvePath(appDir, dir); },\n    tauri: function (dir) { return resolvePath(tauriDir, dir); }\n};\nexports.resolve = resolveDir;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar ms_1 = __importDefault(require(\"ms\"));\nvar prevTime;\nexports.default = (function (banner, color) {\n    if (color === void 0) { color = chalk_1.default.green; }\n    return function (msg) {\n        var curr = +new Date();\n        var diff = curr - (prevTime || curr);\n        prevTime = curr;\n        if (msg) {\n            console.log(\n            // TODO: proper typings for color and banner\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\n            \" \" + color(String(banner)) + \" \" + msg + \" \" + chalk_1.default.green(\"+\" + ms_1.default(diff)));\n        }\n        else {\n            console.log();\n        }\n    };\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawnSync = exports.spawn = void 0;\nvar cross_spawn_1 = __importDefault(require(\"cross-spawn\"));\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar log = logger_1.default('app:spawn');\nvar warn = logger_1.default('app:spawn', chalk_1.default.red);\n/*\n  Returns pid, takes onClose\n */\nvar spawn = function (cmd, params, cwd, onClose) {\n    log(\"Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    // TODO: move to execa?\n    var runner = cross_spawn_1.default(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd,\n        env: process.env\n    });\n    runner.on('close', function (code) {\n        log();\n        if (code) {\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n            log(\"Command \\\"\" + cmd + \"\\\" failed with exit code: \" + code);\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onClose && onClose(code, runner.pid);\n    });\n    return runner.pid;\n};\nexports.spawn = spawn;\n/*\n  Returns nothing, takes onFail\n */\nvar spawnSync = function (cmd, params, cwd, onFail) {\n    log(\"[sync] Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    var runner = cross_spawn_1.default.sync(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd\n    });\n    // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n    if (runner.status || runner.error) {\n        warn();\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        warn(\"\\u26A0\\uFE0F  Command \\\"\" + cmd + \"\\\" failed with exit code: \" + runner.status);\n        if (runner.status === null) {\n            warn(\"\\u26A0\\uFE0F  Please globally install \\\"\" + cmd + \"\\\"\");\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onFail && onFail();\n        process.exit(1);\n    }\n};\nexports.spawnSync = spawnSync;\n","module.exports = require(\"chalk\");;","module.exports = require(\"cross-spawn\");;","module.exports = require(\"fs\");;","module.exports = require(\"https\");;","module.exports = require(\"inquirer\");;","module.exports = require(\"ms\");;","module.exports = require(\"path\");;","module.exports = require(\"semver\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/api/recipes/install.ts\");\n"],"sourceRoot":""}