{"version":3,"sources":["webpack://tauri/webpack/universalModuleDefinition","webpack://tauri/./src/api/dependency-manager/util.ts","webpack://tauri/./src/api/info.ts","webpack://tauri/./src/helpers/app-paths.ts","webpack://tauri/./src/helpers/get-script-version.ts","webpack://tauri/./src/helpers/logger.ts","webpack://tauri/./src/helpers/non-webpack-require.ts","webpack://tauri/./src/helpers/spawn.ts","webpack://tauri/external \"@tauri-apps/toml\"","webpack://tauri/external \"chalk\"","webpack://tauri/external \"cross-spawn\"","webpack://tauri/external \"fs\"","webpack://tauri/external \"https\"","webpack://tauri/external \"ms\"","webpack://tauri/external \"os\"","webpack://tauri/external \"path\"","webpack://tauri/external \"semver\"","webpack://tauri/webpack/bootstrap","webpack://tauri/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;ACVa;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,gBAAgB,GAAG,kBAAkB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,yBAAyB,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,6BAA6B;AACxN,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C,cAAc,mBAAO,CAAC,mDAAqB;AAC3C,oBAAoB,mBAAO,CAAC,gCAAa;AACzC,kBAAkB,mBAAO,CAAC,2DAAyB;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,+BAA+B,mBAAO,CAAC,sBAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,gBAAgB;;;;;;;;;;;AC5MH;AACb;AACA,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,6BAA6B,mBAAO,CAAC,0CAAkB;AACvD,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C,2BAA2B,mBAAO,CAAC,cAAI;AACvC,2BAA2B,mBAAO,CAAC,cAAI;AACvC,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C,kBAAkB,mBAAO,CAAC,wDAAsB;AAChD,oBAAoB,mBAAO,CAAC,gCAAa;AACzC,4CAA4C,mBAAO,CAAC,4EAAgC;AACpF,qCAAqC,mBAAO,CAAC,0CAAoB;AACjE,2CAA2C,mBAAO,CAAC,0EAA+B;AAClF,aAAa,mBAAO,CAAC,uEAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,6BAA6B,gBAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,4BAA4B;AAC3D;AACA;AACA;AACA,8DAA8D,6BAA6B,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,kBAAkB,EAAE;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,wDAAwD,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0CAA0C;AAC7E;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,+BAA+B;AAC/B;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,MAAM;AACpC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,2BAA2B,4CAA4C;AACvE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yCAAyC;AACpE;AACA;AACA,sEAAsE,6BAA6B,EAAE;AACrG,iBAAiB;AACjB;AACA;AACA,sEAAsE,6BAA6B,EAAE;AACrG,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wCAAwC;AACnE,2BAA2B,yCAAyC;AACpE,2BAA2B,2CAA2C;AACtE,2BAA2B,gDAAgD;AAC3E;AACA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,EAAE;AACH;;;;;;;;;;;AC9Ta;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,eAAe,GAAG,gBAAgB,GAAG,cAAc;AACnD,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,+BAA+B,mBAAO,CAAC,yCAAU;AACjD,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gBAAgB;AAChB;AACA,yBAAyB,iCAAiC,EAAE;AAC5D,2BAA2B,mCAAmC;AAC9D;AACA,eAAe;;;;;;;;;;;ACpCF;AACb;AACA,iDAAiD,QAAQ;AACzD,wCAAwC,QAAQ;AAChD,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,oBAAoB,mBAAO,CAAC,gCAAa;AACzC;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;;;;;;;;;;ACxBF;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C,2BAA2B,mBAAO,CAAC,cAAI;AACvC;AACA,eAAe;AACf,2BAA2B,+BAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACxBY;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D;AACA,eAAe;AACf;AACA,WAAW,OAAuB;AAClC,CAAC;;;;;;;;;;;ACNY;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,iBAAiB,GAAG,aAAa;AACjC,oCAAoC,mBAAO,CAAC,gCAAa;AACzD,+BAA+B,mBAAO,CAAC,yCAAU;AACjD,8BAA8B,mBAAO,CAAC,oBAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;;;;;;;;;;AC1DjB,8C;;;;;;;;;;ACAA,mC;;;;;;;;;;ACAA,yC;;;;;;;;;;ACAA,gC;;;;;;;;;;ACAA,mC;;;;;;;;;;ACAA,gC;;;;;;;;;;ACAA,gC;;;;;;;;;;ACAA,kC;;;;;;;;;;ACAA,oC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;UCrBA;UACA;UACA;UACA","file":"api/info.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tauri\"] = factory();\n\telse\n\t\troot[\"tauri\"] = factory();\n})(global, function() {\nreturn ","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.semverLt = exports.padVersion = exports.updateNpmPackage = exports.installNpmDevPackage = exports.installNpmPackage = exports.getNpmPackageVersion = exports.getNpmLatestVersion = exports.getCrateLatestVersion = void 0;\nvar https_1 = __importDefault(require(\"https\"));\nvar spawn_1 = require(\"../../helpers/spawn\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar fs_1 = require(\"fs\");\nvar semver_1 = __importDefault(require(\"semver\"));\nvar BASE_URL = 'https://docs.rs/crate/';\nfunction useYarn() {\n    return __awaiter(this, void 0, void 0, function () {\n        var hasYarnLockfile;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    hasYarnLockfile = fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'));\n                    if (!hasYarnLockfile) return [3 /*break*/, 1];\n                    return [2 /*return*/, true];\n                case 1: return [4 /*yield*/, new Promise(function (resolve) {\n                        var _a;\n                        var child = cross_spawn_1.sync('npm', ['--version']);\n                        resolve(!!((_a = child.status) !== null && _a !== void 0 ? _a : child.error));\n                    })];\n                case 2: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction getCrateLatestVersion(crateName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n                        var url = \"\" + BASE_URL + crateName;\n                        https_1.default.get(url, function (res) {\n                            if (res.statusCode !== 302 || !res.headers.location) {\n                                reject(res);\n                            }\n                            else {\n                                var version = res.headers.location.replace(url + '/', '');\n                                resolve(version);\n                            }\n                        });\n                    })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.getCrateLatestVersion = getCrateLatestVersion;\nfunction getNpmLatestVersion(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var child, output, packageJson, child;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        child = cross_spawn_1.sync('yarn', ['info', packageName, 'versions', '--json'], {\n                            cwd: app_paths_1.appDir\n                        });\n                        output = String(child.output[1]);\n                        packageJson = JSON.parse(output);\n                        return [2 /*return*/, packageJson.data[packageJson.data.length - 1]];\n                    }\n                    else {\n                        child = cross_spawn_1.sync('npm', ['show', packageName, 'version'], {\n                            cwd: app_paths_1.appDir\n                        });\n                        return [2 /*return*/, String(child.output[1]).replace('\\n', '')];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.getNpmLatestVersion = getNpmLatestVersion;\nfunction getNpmPackageVersion(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        var child, output, matches;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    child = (_a.sent())\n                        ? cross_spawn_1.sync('yarn', ['list', '--patern', packageName, '--depth', '0'], {\n                            cwd: app_paths_1.appDir\n                        })\n                        : cross_spawn_1.sync('npm', ['list', packageName, 'version', '--depth', '0'], {\n                            cwd: app_paths_1.appDir\n                        });\n                    output = String(child.output[1]);\n                    matches = new RegExp(packageName + '@(\\\\S+)', 'g').exec(output);\n                    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n                        return [2 /*return*/, matches[1]];\n                    }\n                    else {\n                        return [2 /*return*/, null];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.getNpmPackageVersion = getNpmPackageVersion;\nfunction installNpmPackage(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        spawn_1.spawnSync('yarn', ['add', packageName], app_paths_1.appDir);\n                    }\n                    else {\n                        spawn_1.spawnSync('npm', ['install', packageName], app_paths_1.appDir);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.installNpmPackage = installNpmPackage;\nfunction installNpmDevPackage(packageName) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, useYarn()];\n                case 1:\n                    if (_a.sent()) {\n                        spawn_1.spawnSync('yarn', ['add', packageName, '--dev'], app_paths_1.appDir);\n                    }\n                    else {\n                        spawn_1.spawnSync('npm', ['install', packageName, '--save-dev'], app_paths_1.appDir);\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.installNpmDevPackage = installNpmDevPackage;\nfunction updateNpmPackage(packageName) {\n    var usesYarn = fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'));\n    if (usesYarn) {\n        spawn_1.spawnSync('yarn', ['upgrade', packageName, '--latest'], app_paths_1.appDir);\n    }\n    else {\n        spawn_1.spawnSync('npm', ['install', packageName + \"@latest\"], app_paths_1.appDir);\n    }\n}\nexports.updateNpmPackage = updateNpmPackage;\nfunction padVersion(version) {\n    var _a;\n    var count = ((_a = version.match(/\\./g)) !== null && _a !== void 0 ? _a : []).length;\n    while (count < 2) {\n        count++;\n        version += '.0';\n    }\n    return version;\n}\nexports.padVersion = padVersion;\nfunction semverLt(first, second) {\n    return semver_1.default.lt(padVersion(first), padVersion(second));\n}\nexports.semverLt = semverLt;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toml_1 = __importDefault(require(\"@tauri-apps/toml\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar fs_1 = __importDefault(require(\"fs\"));\nvar os_1 = __importDefault(require(\"os\"));\nvar path_1 = __importDefault(require(\"path\"));\nvar app_paths_1 = require(\"../helpers/app-paths\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar non_webpack_require_1 = __importDefault(require(\"../helpers/non-webpack-require\"));\nvar package_json_1 = __importDefault(require(\"../../package.json\"));\nvar get_script_version_1 = __importDefault(require(\"../helpers/get-script-version\"));\nvar util_1 = require(\"./dependency-manager/util\");\nfunction crateLatestVersion(name) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, util_1.getCrateLatestVersion(name)];\n                case 1: return [2 /*return*/, _b.sent()];\n                case 2:\n                    _a = _b.sent();\n                    return [2 /*return*/, undefined];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\n/* eslint-disable security/detect-non-literal-fs-filename */\nfunction dirTree(filename, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var stats = fs_1.default.lstatSync(filename);\n    var info = {\n        path: filename,\n        name: path_1.default.basename(filename)\n    };\n    if (stats.isDirectory()) {\n        info.type = 'folder';\n        if (recurse) {\n            info.children = fs_1.default.readdirSync(filename).map(function (child) {\n                return dirTree(filename + '/' + child, false);\n            });\n        }\n    }\n    else {\n        info.type = 'file';\n    }\n    return info;\n}\nfunction getVersion(command, args, formatter) {\n    if (args === void 0) { args = []; }\n    var version = get_script_version_1.default(command, args);\n    if (version === null) {\n        return chalk_1.default.red('Not installed');\n    }\n    else {\n        return chalk_1.default.green(formatter === undefined ? version : formatter(version));\n    }\n}\nfunction printInfo(info) {\n    var suffix = info.suffix ? \" \" + info.suffix : '';\n    console.log(\"\" + (info.section ? '\\n' : '') + info.key + (info.value === undefined ? '' : ' - ' + info.value) + suffix);\n}\nfunction printVersion(info) {\n    var outdated = info.version &&\n        info.targetVersion &&\n        util_1.semverLt(info.version, info.targetVersion);\n    console.log(\"\" + (info.section ? '\\n' : '') + info.key + (info.version\n        ? ' - ' + chalk_1.default.green(info.version)\n        : chalk_1.default.red('Not installed')) +\n        (outdated && info.targetVersion\n            ? \" (\" + chalk_1.default.red('outdated, latest: ' + info.targetVersion) + \")\"\n            : ''));\n}\nfunction readTomlFile(filepath) {\n    try {\n        var file = fs_1.default.readFileSync(filepath).toString();\n        return toml_1.default.parse(file);\n    }\n    catch (_) {\n        return null;\n    }\n}\nfunction printAppInfo(tauriDir) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var lockPath, lock, lockPackages, manifestPath, manifest, tauriVersion, foundTauriVersions, manifestVersion, lockVersion, tauriVersionString, latestTauriCore, tauriMode, configPath, config;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    printInfo({ key: 'App', section: true });\n                    lockPath = path_1.default.join(tauriDir, 'Cargo.lock');\n                    lock = readTomlFile(lockPath);\n                    lockPackages = lock\n                        ? lock.package.filter(function (pkg) { return pkg.name === 'tauri'; })\n                        : [];\n                    manifestPath = path_1.default.join(tauriDir, 'Cargo.toml');\n                    manifest = readTomlFile(manifestPath);\n                    foundTauriVersions = [];\n                    if (manifest && lock && lockPackages.length === 1) {\n                        // everything looks good\n                        foundTauriVersions.push(lockPackages[0].version);\n                        tauriVersion = chalk_1.default.green(lockPackages[0].version);\n                    }\n                    else if (lock && lockPackages.length === 1) {\n                        // good lockfile, but no manifest - will cause problems building\n                        foundTauriVersions.push(lockPackages[0].version);\n                        tauriVersion = chalk_1.default.green(lockPackages[0].version) + \" (\" + chalk_1.default.red('no manifest') + \")\";\n                    }\n                    else {\n                        manifestVersion = function () {\n                            var tauri = manifest === null || manifest === void 0 ? void 0 : manifest.dependencies.tauri;\n                            if (tauri) {\n                                if (typeof tauri === 'string') {\n                                    foundTauriVersions.push(tauri);\n                                    return chalk_1.default.yellow(tauri);\n                                }\n                                else if (tauri.version) {\n                                    foundTauriVersions.push(tauri.version);\n                                    return chalk_1.default.yellow(tauri.version);\n                                }\n                                else if (tauri.path) {\n                                    var manifestPath_1 = path_1.default.resolve(tauriDir, tauri.path, 'Cargo.toml');\n                                    var manifestContent = readTomlFile(manifestPath_1);\n                                    var pathVersion = manifestContent === null || manifestContent === void 0 ? void 0 : manifestContent.package.version;\n                                    pathVersion = pathVersion\n                                        ? chalk_1.default.yellow(pathVersion)\n                                        : chalk_1.default.red(pathVersion);\n                                    return \"path:\" + tauri.path + \" [\" + pathVersion + \"]\";\n                                }\n                            }\n                            else {\n                                return chalk_1.default.red('no manifest');\n                            }\n                            return chalk_1.default.red('unknown manifest');\n                        };\n                        lockVersion = void 0;\n                        if (lock && lockPackages.length > 0) {\n                            lockVersion = chalk_1.default.yellow(lockPackages.map(function (p) { return p.version; }).join(', '));\n                        }\n                        else if (lock && lockPackages.length === 0) {\n                            lockVersion = chalk_1.default.red('unknown lockfile');\n                        }\n                        else {\n                            lockVersion = chalk_1.default.red('no lockfile');\n                        }\n                        tauriVersion = manifestVersion() + \" (\" + chalk_1.default.yellow(lockVersion) + \")\";\n                    }\n                    tauriVersionString = foundTauriVersions.reduce(function (old, current) { return (util_1.semverLt(old, current) ? current : old); }, '0.0.0');\n                    return [4 /*yield*/, crateLatestVersion('tauri')];\n                case 1:\n                    latestTauriCore = _b.sent();\n                    printInfo({\n                        key: '  tauri.rs',\n                        value: tauriVersion,\n                        suffix: tauriVersionString !== '0.0.0' &&\n                            latestTauriCore &&\n                            util_1.semverLt(tauriVersionString, latestTauriCore)\n                            ? \"(\" + chalk_1.default.red('outdated, latest: ' + latestTauriCore) + \")\"\n                            : undefined\n                    });\n                    try {\n                        tauriMode = function (config) {\n                            if (config.tauri.embeddedServer) {\n                                return chalk_1.default.green(config.tauri.embeddedServer.active ? 'embedded-server' : 'no-server');\n                            }\n                            return chalk_1.default.red('unset');\n                        };\n                        configPath = path_1.default.join(tauriDir, 'tauri.conf.json');\n                        config = non_webpack_require_1.default(configPath);\n                        printInfo({ key: '  mode', value: tauriMode(config) });\n                        printInfo({\n                            key: '  build-type',\n                            value: ((_a = config.tauri.bundle) === null || _a === void 0 ? void 0 : _a.active) ? 'bundle' : 'build'\n                        });\n                        printInfo({\n                            key: '  CSP',\n                            value: config.tauri.security ? config.tauri.security.csp : 'unset'\n                        });\n                        printInfo({\n                            key: '  distDir',\n                            value: config.build\n                                ? chalk_1.default.green(config.build.distDir)\n                                : chalk_1.default.red('unset')\n                        });\n                        printInfo({\n                            key: '  devPath',\n                            value: config.build\n                                ? chalk_1.default.green(config.build.devPath)\n                                : chalk_1.default.red('unset')\n                        });\n                    }\n                    catch (_) { }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nmodule.exports = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var stdout, match, edgeString, _a, _b, tree, _i, _c, artifact;\n    var _d, _e;\n    return __generator(this, function (_f) {\n        switch (_f.label) {\n            case 0:\n                printInfo({\n                    key: 'Operating System',\n                    value: chalk_1.default.green(os_1.default.type() + \"(\" + os_1.default.release() + \") - \" + os_1.default.platform() + \"/\" + os_1.default.arch()),\n                    section: true\n                });\n                if (os_1.default.platform() === 'win32') {\n                    stdout = cross_spawn_1.sync('REG', [\n                        'QUERY',\n                        'HKEY_CLASSES_root\\\\AppX3xxs313wwkfjhythsb8q46xdsq8d2cvv\\\\Application',\n                        '/v',\n                        'ApplicationName'\n                    ]).stdout;\n                    match = /{(\\S+)}/g.exec(stdout.toString());\n                    if (match) {\n                        edgeString = match[1];\n                        printInfo({\n                            key: 'Microsoft Edge',\n                            value: edgeString.split('?')[0].replace('Microsoft.MicrosoftEdge_', '')\n                        });\n                    }\n                }\n                printInfo({ key: 'Node.js environment', section: true });\n                printVersion({\n                    key: '  Node.js',\n                    version: process.version.slice(1),\n                    targetVersion: package_json_1.default.engines.node.replace('>= ', '')\n                });\n                _a = printVersion;\n                _d = {\n                    key: '  tauri.js',\n                    version: package_json_1.default.version\n                };\n                return [4 /*yield*/, util_1.getNpmLatestVersion('tauri')];\n            case 1:\n                _a.apply(void 0, [(_d.targetVersion = _f.sent(),\n                        _d)]);\n                printInfo({ key: 'Rust environment', section: true });\n                printInfo({\n                    key: '  rustc',\n                    value: getVersion('rustc', [], function (output) { return output.split(' ')[1]; })\n                });\n                printInfo({\n                    key: '  cargo',\n                    value: getVersion('cargo', [], function (output) { return output.split(' ')[1]; })\n                });\n                _b = printVersion;\n                _e = {\n                    key: '  tauri-bundler',\n                    version: get_script_version_1.default('cargo', ['tauri-bundler'])\n                };\n                return [4 /*yield*/, crateLatestVersion('tauri-bundler')];\n            case 2:\n                _b.apply(void 0, [(_e.targetVersion = _f.sent(),\n                        _e)]);\n                printInfo({ key: 'Global packages', section: true });\n                printInfo({ key: '  NPM', value: getVersion('npm') });\n                printInfo({ key: '  yarn', value: getVersion('yarn') });\n                printInfo({ key: 'App directory structure', section: true });\n                tree = dirTree(app_paths_1.appDir);\n                // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n                for (_i = 0, _c = tree.children || []; _i < _c.length; _i++) {\n                    artifact = _c[_i];\n                    if (artifact.type === 'folder') {\n                        console.log(\"/\" + artifact.name);\n                    }\n                }\n                return [4 /*yield*/, printAppInfo(app_paths_1.tauriDir)];\n            case 3:\n                _f.sent();\n                return [2 /*return*/];\n        }\n    });\n}); };\n/* eslint-enable security/detect-non-literal-fs-filename */\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = exports.tauriDir = exports.appDir = void 0;\nvar fs_1 = require(\"fs\");\nvar path_1 = require(\"path\");\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar warn = logger_1.default('tauri', chalk_1.default.red);\nfunction resolvePath(basePath, dir) {\n    return dir && path_1.isAbsolute(dir) ? dir : path_1.resolve(basePath, dir);\n}\nvar getAppDir = function () {\n    var dir = process.cwd();\n    var count = 0;\n    // only go up three folders max\n    while (dir.length > 0 && !dir.endsWith(path_1.sep) && count <= 2) {\n        if (fs_1.existsSync(path_1.join(dir, 'src-tauri', 'tauri.conf.json'))) {\n            return dir;\n        }\n        count++;\n        dir = path_1.normalize(path_1.join(dir, '..'));\n    }\n    warn(\"Couldn't find recognize the current folder as a part of a Tauri project\");\n    process.exit(1);\n};\nvar appDir = getAppDir();\nexports.appDir = appDir;\nvar tauriDir = path_1.resolve(appDir, 'src-tauri');\nexports.tauriDir = tauriDir;\nvar resolveDir = {\n    app: function (dir) { return resolvePath(appDir, dir); },\n    tauri: function (dir) { return resolvePath(tauriDir, dir); }\n};\nexports.resolve = resolveDir;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cross_spawn_1 = require(\"cross-spawn\");\nfunction getVersion(command, args) {\n    if (args === void 0) { args = []; }\n    try {\n        var child = cross_spawn_1.sync(command, __spreadArrays(args, ['--version']));\n        if (child.status === 0) {\n            var output = String(child.output[1]);\n            return output.replace(/\\n/g, '');\n        }\n        return null;\n    }\n    catch (err) {\n        return null;\n    }\n}\nexports.default = getVersion;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar ms_1 = __importDefault(require(\"ms\"));\nvar prevTime;\nexports.default = (function (banner, color) {\n    if (color === void 0) { color = chalk_1.default.green; }\n    return function (msg) {\n        var curr = +new Date();\n        var diff = curr - (prevTime || curr);\n        prevTime = curr;\n        if (msg) {\n            console.log(\n            // TODO: proper typings for color and banner\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\n            \" \" + color(String(banner)) + \" \" + msg + \" \" + chalk_1.default.green(\"+\" + ms_1.default(diff)));\n        }\n        else {\n            console.log();\n        }\n    };\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// this function has been moved to a module so we can mock it\nexports.default = (function (path) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return __non_webpack_require__(path);\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawnSync = exports.spawn = void 0;\nvar cross_spawn_1 = __importDefault(require(\"cross-spawn\"));\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar log = logger_1.default('app:spawn');\nvar warn = logger_1.default('app:spawn', chalk_1.default.red);\n/*\n  Returns pid, takes onClose\n */\nvar spawn = function (cmd, params, cwd, onClose) {\n    log(\"Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    // TODO: move to execa?\n    var runner = cross_spawn_1.default(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd,\n        env: process.env\n    });\n    runner.on('close', function (code) {\n        log();\n        if (code) {\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n            log(\"Command \\\"\" + cmd + \"\\\" failed with exit code: \" + code);\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onClose && onClose(code, runner.pid);\n    });\n    return runner.pid;\n};\nexports.spawn = spawn;\n/*\n  Returns nothing, takes onFail\n */\nvar spawnSync = function (cmd, params, cwd, onFail) {\n    log(\"[sync] Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    var runner = cross_spawn_1.default.sync(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd\n    });\n    // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n    if (runner.status || runner.error) {\n        warn();\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        warn(\"\\u26A0\\uFE0F  Command \\\"\" + cmd + \"\\\" failed with exit code: \" + runner.status);\n        if (runner.status === null) {\n            warn(\"\\u26A0\\uFE0F  Please globally install \\\"\" + cmd + \"\\\"\");\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onFail && onFail();\n        process.exit(1);\n    }\n};\nexports.spawnSync = spawnSync;\n","module.exports = require(\"@tauri-apps/toml\");;","module.exports = require(\"chalk\");;","module.exports = require(\"cross-spawn\");;","module.exports = require(\"fs\");;","module.exports = require(\"https\");;","module.exports = require(\"ms\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"semver\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/api/info.ts\");\n"],"sourceRoot":""}